<!DOCTYPE html>
<html>
<head>
    <title>Employee Payroll Dashboard</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>

<h1>Employee Payroll System</h1>
<form method="GET" action="/" style="text-align:center; margin-bottom:20px;">
    <input type="text" name="search" placeholder="Search by name or department" value="<%= search || '' %>">
    <button type="submit">Search</button>
    <a href="/">Clear</a>
</form>

<div class="cards">

    <div class="card">
        <h3>Total Employees</h3>
        <p><%= totalEmployees %></p>
    </div>

    <div class="card">
        <h3>Departments</h3>
        <p><%= totalDepartments %></p>
    </div>

    <div class="card">
        <h3>Total Basic Salary</h3>
        <p>₹ <%= totalBasicSalary.toFixed(2) %></p>
    </div>

    <div class="card">
        <h3>Total Tax</h3>
        <p>₹ <%= totalTax.toFixed(2) %></p>
    </div>

    <div class="card">
        <h3>Total Net Salary</h3>
        <p>₹ <%= totalNetSalary.toFixed(2) %></p>
    </div>

    <div class="card">
        <h3>Average Salary</h3>
        <p>₹ <%= avgSalary.toFixed(2) %></p>
    </div>

</div>


<a href="/add">Add Employee</a>

<table border="1" cellpadding="10">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Department</th>
        <th>Basic Salary</th>
        <th>Tax (12%)</th>
        <th>Net Salary</th>
        <th>Actions</th>

    </tr>

    <% employees.forEach(emp => { %>
        <% 
            const tax = emp.salary * 0.12;
            const net = emp.salary - tax;
        %>
        <tr>
            <td><%= emp.id %></td>
            <td><%= emp.name %></td>
            <td><%= emp.department %></td>
            <td><%= emp.salary %></td>
            <td><%= tax.toFixed(2) %></td>
            <td><%= net.toFixed(2) %></td>
            <td>
                <a href="/edit/<%= emp.id %>">Edit</a> |
                <a href="/delete/<%= emp.id %>" onclick="return confirm('Delete this employee?')">Delete</a>
            </td>


        </tr>
    <% }) %>

</table>

</body>
</html>
